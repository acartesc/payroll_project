<% content_for :sidebar do %>
<%= render 'layouts/sidebars/sidebar_show_remuneration' %>
<% end %>

<p id="notice"><%= notice %></p>

<h1>Liquidación de Sueldo</h1>
<h3>Mes: <%= months_to_string(@remuneration.month.month)%> <%= @remuneration.month.year%></h3>
<p>

</p>

<table class="table">
  <tr>
    <th>Empresa:</th>
    <th>Rut Empresa:</th>
  </tr>
  <tr>
    <td><%= @remuneration.business_name %></td>
    <td><%= @remuneration.taxpayer_id_company %></td>
  </tr>
</table>

<br>

<table class="table">
  <tr>
    <th>Rut:</th>
    <th>Trabajador:</th>
  </tr>
  <tr>
    <td><%= @remuneration.worker_rut %></td>
    <td><%= @remuneration.worker_name %></td>
  </tr>
</table>

<br>

<table class="table">
  <tr>
    <th>AFP:</th>
    <th>Isapre:</th>
  </tr>
  <tr>
    <td><%= @remuneration.pension_fund_name %></td>
    <td><%= @remuneration.health_plan_name %></td>
  </tr>
  <tr>
    <td><%= @remuneration.pension_fund_deduction %></td>
    <td><%= @remuneration.health_plan_deduction %></td>
  </tr>
</table>

<br>

<table class="table">
  <tr>
    <th>Dias Trabajados</th>
    <th>Horas Extras</th>
    <th>Cargas</th>
    <th>Imponible</th>
    <th>Tributable</th>
  </tr>
  <tr>
    <td><%= @remuneration.calculate_assistance %></td>
    <td><%= @remuneration.extra_hour %></td>
    <td><%= @remuneration.family_burden %></td>
    <td><%= number_with_delimiter(@remuneration.tax_base) %></td>
    <td><%= number_with_delimiter(@remuneration.taxable) %></td>
  </tr>

</table>

<br>

<table class="table">
  <tr>
    <th colspan="2">Haberes</th>
    <th colspan="2">Descuentos</th>
  </tr>
  <tr>
    <td>Sueldo Base</td>
    <td><%= number_with_delimiter(@remuneration.base_salary) %></td>
    <td>Previsión</td>
    <td><%= number_with_delimiter(@remuneration.pension_fund_discount) %></td>
  </tr>
  <tr>
    <td>Horas Extra 50%</td>
    <td><%= number_with_delimiter(@remuneration.extra_hour) %></td>
    <td>Salud</td>
    <td><%= number_with_delimiter(@remuneration.health_discount) %></td>
  </tr>
  <tr>
    <td>Gratificación Legal</td>
    <td><%= number_with_delimiter(@remuneration.legal_bonus) %></td>
    <td>Impuesto Único</td>
    <td><%= number_with_delimiter(@remuneration.unique_tax_discount) %></td>
  </tr>
  <tr>
    <td>Anticipos</td>
    <td><%= number_with_delimiter(@remuneration.advance_payment) %></td>
    <td>Seguro de Cesantía</td>
    <td><%= number_with_delimiter(@remuneration.unemployment_insurance) %></td>
  </tr>
  <tr>
    <td>Otros Bonos</td>
    <td><%= number_with_delimiter(@remuneration.bonus) %></td>
    <td colspan="2"></td>
  </tr>
  <tr>
    <th>Total Imponible</th>
    <td><%= number_with_delimiter(@remuneration.tax_base) %></td>
    <th>Total Descuentos Legales</th>
    <td><%= number_with_delimiter(@remuneration.total_legal_discount) %></td>
  </tr>
  <tr >
    <td colspan="4"></td>
  </tr>
  <tr>
    <td>Asginación de Colación</td>
    <td><%= number_with_delimiter(@remuneration.food_allowance) %></td>
    <td>Descuento por Anticipos</td>
    <td><%= number_with_delimiter(@remuneration.advance_payment_discount) %></td>
  </tr>
  <tr>
    <td>Asginación de Movilización</td>
    <td><%= number_with_delimiter(@remuneration.transportation_allowance) %></td>
    <td colspan="2"></td>
  </tr>
  <tr>
    <th>Total No Imponible</th>
    <td><%= number_with_delimiter(@remuneration.non_tax_base) %></td>
    <th>Total Otros Descuentos </th>
    <td><%= number_with_delimiter(@remuneration.total_other_discount) %></td>
  </tr>
</table>

<p>
  <strong>Total Haberes:</strong>
  <%= number_with_delimiter(@remuneration.total_asset) %>
</p>

<p>
  <strong>Total Descuentos:</strong>
  <%= number_with_delimiter(@remuneration.total_discount) %>
</p>

<p>
  <strong>Sueldo Líquido::</strong>
  <%= number_with_delimiter(@remuneration.net_pay) %>
</p>
